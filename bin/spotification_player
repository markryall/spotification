#!/usr/bin/env ruby

$: << File.dirname(__FILE__)+'/../lib'

require 'track_queue'
require 'rdio_controller'

include TrackQueue
include RdioController

loop do
  begin
    if player_state == 'paused'
      track = dequeue
      if track
        puts "playing: #{track['name']} by #{track['artists']} from #{track['album']}"
        play track['id']
      end
    end
    sleep 5
  rescue Interrupt
    exit
  end
end